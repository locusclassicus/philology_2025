# –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –º—ã –æ—Å–≤–æ–∏–º –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø–µ—á–∞—Ç–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ R ‚Äì –ø–∞–∫–µ—Ç `tesseract`, –∞ —Ç–∞–∫–∂–µ –Ω–∞—É—á–∏–º—Å—è –¥–æ–æ–±—É—á–∞—Ç—å –º–æ–¥–µ–ª–∏ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ —à—Ä–∏—Ñ—Ç—ã. –î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

```{r message=FALSE}
library(qpdf)
library(tesseract)
library(pdftools)
# install.packages("remotes")
# remotes::install_github("arcruz0/tesseractgt")
library(tesseractgt)
library(magick)
```

## –ß—Ç–æ —Ç–∞–∫–æ–µ OCR –∏ tesseract

OCR (Optical Character Recognition) ‚Äî —ç—Ç–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø–µ—á–∞—Ç–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –µ–≥–æ –≤ –º–∞—à–∏–Ω–Ω–æ-—á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç. –≠—Ç–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç ‚Äú–∏–∑–≤–ª–µ–∫–∞—Ç—å‚Äù —Ç–µ–∫—Å—Ç –∏–∑ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π, PDF-—Ñ–∞–π–ª–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤.

[Tesseract](https://ru.wikipedia.org/wiki/Tesseract) ‚Äî —ç—Ç–æ –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ OCR —Å _–æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º_, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏–µ–π Google. Tesseract –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–æ–ª–µ–µ 100 —è–∑—ã–∫–æ–≤ –∏ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –≠—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ Tesseract –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—É—á–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π (LSTM), –∏ –∏—Ö –º–æ–∂–Ω–æ –¥–æ–æ–±—É—á–∞—Ç—å –ø–æ–¥ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏, —á—Ç–æ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–∏—Ö –º–æ—â–Ω–æ—Å—Ç–µ–π –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.  

–ü–∞–∫–µ—Ç `tesseract` –≤ R –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–±–µ—Ä—Ç–∫—É –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Tesseract, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å —Ç–µ–∫—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (PNG, JPEG, TIFF, PDF);
- –†–∞–±–æ—Ç–∞—Ç—å —Å –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏;
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤ ([—Å–ø–∏—Å–æ–∫](https://tesseract-ocr.github.io/tessdoc/Data-Files-in-different-versions.html));
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏;
- –î–æ–æ–±—É—á–∞—Ç—å –º–æ–¥–µ–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —à—Ä–∏—Ñ—Ç–æ–≤ –∏–ª–∏ —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–Ω–ª–∞–π–Ω-—Å–µ—Ä–≤–∏—Å–æ–≤ OCR, –ø–∞–∫–µ—Ç `tesseract` —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å ‚Äî –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º;
- –°–∫–æ—Ä–æ—Å—Ç—å ‚Äî –Ω–µ—Ç –∑–∞–¥–µ—Ä–∂–µ–∫ –Ω–∞ –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–µ—Ç–∏;
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ—Å—Ç—å ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏;
- –ë–µ—Å—à–æ–≤–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π R –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö.

–û–¥–Ω–∞–∫–æ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ç–∏–ø–∞ —à—Ä–∏—Ñ—Ç–∞, —è–∑—ã–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ —É–º–µ—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –º–æ–¥–µ–ª–∏, –Ω–æ –∏ –¥–æ–æ–±—É—á–∞—Ç—å –∏—Ö –ø–æ–¥ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏.

```{r}
```

## –î–∞–Ω–Ω—ã–µ

–í –∫–∞—á–µ—Å—Ç–≤–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –º—ã –≤–æ–∑—å–º–µ–º —á. 6 ‚Ññ 6 –∂—É—Ä–Ω–∞–ª–∞ ‚Äú–ù–µ–≤—Å–∫–∏–π –∑—Ä–∏—Ç–µ–ª—å‚Äù –∑–∞ 1821 –≥. ([–∏—Å—Ç–æ—á–Ω–∏–∫](http://lib.pushkinskijdom.ru/Default.aspx?tabid=11373)). –ß—Ç–æ–±—ã –Ω–µ –∑–∞–ø—É—Ç–∞—Ç—å—Å—è –≤ –≤—ã–ø—É—Å–∫–∞—Ö, –∑–∞–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –Ω–æ–º–µ—Ä [–∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∫—É—Ä—Å–∞](https://github.com/locusclassicus/philology_2025/tree/main/ocr) –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä.

–ñ—É—Ä–Ω–∞–ª ¬´–ù–µ–≤—Å–∫–∏–π –∑—Ä–∏—Ç–µ–ª—å¬ª –∏–∑–¥–∞–≤–∞–ª—Å—è –≤ –ü–µ—Ç–µ—Ä–±—É—Ä–≥–µ –µ–∂–µ–º–µ—Å—è—á–Ω–æ —Å —è–Ω–≤–∞—Ä—è 1820 –≥. –ø–æ –∏—é–Ω—å 1821 –≥. –í—Å–µ–≥–æ –≤—ã—à–ª–æ 18 –∫–Ω–∏–∂–µ–∫ –∂—É—Ä–Ω–∞–ª–∞, —Å–æ—Å—Ç–∞–≤–∏–≤—à–∏—Ö 6 —á–∞—Å—Ç–µ–π. –í—Å–µ –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ —Å–∞–π—Ç–µ ‚Äú–ü—É—à–∫–∏–Ω—Å–∫–æ–≥–æ –¥–æ–º–∞‚Äù.

> –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –∏–∑–¥–∞—Ç–µ–ª–µ–º –∂—É—Ä–Ω–∞–ª–∞ –±—ã–ª –≤—ã–ø—É—Å–∫–Ω–∏–∫ –ú–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞ –ò–≤–∞–Ω –ú–∞—Ç–≤–µ–µ–≤–∏—á –°–Ω–∏—Ç–∫–∏–Ω (—Ä–æ–¥. –æ–∫. 1792 –≥.). –° —è–Ω–≤–∞—Ä—è –ø–æ –∞–ø—Ä–µ–ª—å 1820 –≥. —Å–æ–∏–∑–¥–∞—Ç–µ–ª–µ–º ¬´–ù–µ–≤—Å–∫–æ–≥–æ –∑—Ä–∏—Ç–µ–ª—è¬ª –±—ã–ª –í. –ö. –ö—é—Ö–µ–ª—å–±–µ–∫–µ—Ä; –Ω–∞–º–µ—Ä–µ–≤–∞–ª—Å—è –≤–æ–π—Ç–∏ –≤ —á–∏—Å–ª–æ –∏–∑–¥–∞—Ç–µ–ª–µ–π –∏ –ö. –§. –†—ã–ª–µ–µ–≤ (1797-1826), –∞–∫—Ç–∏–≤–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –∂—É—Ä–Ω–∞–ª–∞ —Å –æ–∫—Ç—è–±—Ä—è 1820-–≥–æ –ø–æ —Ñ–µ–≤—Ä–∞–ª—å 1821 –≥. –í —Ä–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è –≤ –∂—É—Ä–Ω–∞–ª–µ –ø–µ—á–∞—Ç–∞–ª–∏—Å—å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ü—É—à–∫–∏–Ω–∞, –ö—é—Ö–µ–ª—å–±–µ–∫–µ—Ä–∞, –ñ—É–∫–æ–≤—Å–∫–æ–≥–æ, –ë–∞—Ä–∞—Ç—ã–Ω—Å–∫–æ–≥–æ, –î–µ–ª—å–≤–∏–≥–∞, –∞ —Ç–∞–∫–∂–µ –†—ã–ª–µ–µ–≤–∞, –ø–æ–º–µ—Å—Ç–∏–≤—à–µ–≥–æ –≤ –æ–∫—Ç—è–±—Ä—å—Å–∫–æ–π –∫–Ω–∏–∂–∫–µ 1820 –≥. –æ—Å—Ç—Ä–µ–π—à—É—é —Å–∞—Ç–∏—Ä—É –Ω–∞ –ê—Ä–∞–∫—á–µ–µ–≤–∞ ¬´–ö –≤—Ä–µ–º–µ–Ω—â–∏–∫—É¬ª. ([–ò—Å—Ç–æ—á–Ω–∏–∫](https://www.gorkilib.ru/events/200-let-zhurnalu-nevskiy-zritel).)

## –í—ã–±–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü

–î–ª—è –Ω–∞—á–∞–ª–∞ –≤—ã—Ä–µ–∂–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–Ω–∏—Ü –∏–∑ pdf. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –≤—ã –ª–µ–≥–∫–æ –º–æ–∂–µ—Ç–µ –¥–µ–ª–∏—Ç—å –ª—é–±—ã–µ –∏–∑–¥–∞–Ω–∏—è –Ω–∞ –≥–ª–∞–≤—ã, —Ä–∞–∑–¥–µ–ª—ã –∏ —Ç.–¥. –°–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏ (—É –º–µ–Ω—è –æ–Ω –ª–µ–∂–∏—Ç –≤ –ø–∞–ø–∫–µ `ocr`, –Ω–æ —É –≤–∞—Å –ø—É—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–æ–π).

```{r}
my_files <- list.files("../ocr", pattern = "pdf", full.names = TRUE)
my_files[2] # –Ω—É–∂–Ω—ã–π —Ñ–∞–π–ª
```

–¢–µ–ø–µ—Ä—å –≤—ã—Ä–µ–∂–µ–º –∏–∑ –∂—É—Ä–Ω–∞–ª–∞ –¥–≤–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –í `input` –æ—Ç–¥–∞–µ–º –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É (–∫–∞–∫ –æ–Ω –≤—ã–≥–ª—è–¥–∏—Ç –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ); –≤ `output` -- –ª—é–±–æ–π –ø—É—Ç—å (–∏–ª–∏ —Ç–æ–ª—å–∫–æ –∏–º—è –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ) –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ (–º–æ–∂–µ—Ç–µ –ø—Ä–∏–¥—É–º–∞—Ç—å —Å–≤–æ–µ); –∞—Ä–≥—É–º–µ–Ω—Ç—É `pages` –ø–µ—Ä–µ–¥–∞–π—Ç–µ –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü.

```{r eval=FALSE}
pdf_subset(input = my_files[2],
           output = "../ocr/–ù–ó1821_6_6[50-51].pdf",
           pages = 50:51)
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É –≤–∞—Å –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è pdf –≤–æ—Ç —Ç–∞–∫–æ–≥–æ —ç–ª–µ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è.

:::{layout-ncol=2}

![](./images/rosalia1.png)

![](./images/rosalia2.png)

:::

:::{.callout-tip icon=false}
–ù–∞–π–¥–∏—Ç–µ –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫ –∫–æ—Ä–ø—É—Å—É —Ä—É—Å—Å–∫–∏—Ö —ç–ª–µ–≥–∏–π –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—É—é —Ñ–∞–º–∏–ª–∏—é –∞–≤—Ç–æ—Ä–∞.
:::

–û—Ç–≤–µ—Ç: `r fitb("–ë–∞–¥—É–ª—å—Ñ")`.

## –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ pdf

–ï—Å–ª–∏ –≤–∞–º –ø–æ–≤–µ–∑–ª–æ, —Ç–æ pdf —Ö—Ä–∞–Ω–∏—Ç —É–∂–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç. –¢–∞–∫–æ–µ –±—ã–≤–∞–µ—Ç –¥–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ (—Ö–æ—Ç—è –∏–Ω–æ–≥–¥–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç–æ–ª—å–∫–æ –ø–ª–æ—Ö–æ–µ, —á—Ç–æ –ø—Ä–æ—â–µ —Å–¥–µ–ª–∞—Ç—å –≤–∏–¥, —á—Ç–æ –µ–≥–æ –Ω–µ—Ç, –∏ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –∑–∞–Ω–æ–≤–æ). –ü—Ä–æ–≤–µ—Ä–∏–º.

```{r}
text1 <- pdf_text(pdf = "../ocr/–ù–ó1821_6_6[50-51].pdf")
# –∫–∞–∫ print(), –Ω–æ –±–æ–ª—å—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ (–º–æ–∂–µ—Ç–µ —Å—Ä–∞–≤–Ω–∏—Ç—å)
cat(text1)
```


–¢–µ–∫—Å—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à–æ, –µ—Å—Ç—å –º–µ–ª–∫–∏–µ –æ—à–∏–±–∫–∏, –Ω–æ –∏—Ö –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å (–æ —á–µ–º —Ä–µ—á—å –ø–æ–π–¥–µ—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ). –ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π –∏–∑ pdf —Ç–µ–∫—Å—Ç –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã, —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Ç–∞–∫:

```{r eval=FALSE}
# —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π –ø—É—Ç—å –∏–ª–∏ –æ–¥–Ω–æ —Ç–æ–ª—å–∫–æ –∏–º—è
writeLines(text1, con = "../ocr/rosalia_1.txt")
```

–ü—Ä–µ–∂–¥–µ —á–µ–º –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è.

## –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ

–ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω (–ø—Ä–∏—Ç–≤–æ—Ä–∏–º—Å—è, —á—Ç–æ —Ç–∞–∫ –∏ –µ—Å—Ç—å), —Ç–æ –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ `tesseract`. –û–¥–Ω–∞–∫–æ –µ—Å—Ç—å –Ω—é–∞–Ω—Å: `tesseract` –Ω–µ –∑–Ω–∞–µ—Ç –¥–æ—Ä–µ—Ñ–æ—Ä–º–µ–Ω–Ω–æ–≥–æ —Ä—É—Å—Å–∫–æ–≥–æ. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤—Å–µ —è—Ç–∏ (—£), –µ—Ä—ã (—ä), —Ñ–∏—Ç—ã (—≤) –∏ –¥–µ—Å—è—Ç–µ—Ä–∏—á–Ω—ã–µ –∏ (—ñ) –ø—Ä–µ–≤—Ä–∞—Ç—è—Ç—Å—è –≤–æ —á—Ç–æ-—Ç–æ —Å—Ç—Ä–∞–Ω–Ω–æ–µ. –ê –µ—â–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ –±—ã–≤–∞—é—Ç —Å –±—É–∫–≤–æ–π "—Ç", —Ç.–∫. –≤ XVIII –∏ XIX –≤. –µ–µ –∏–Ω–æ–≥–¥–∞ –ø–µ—á–∞—Ç–∞–ª–∏ –ø–æ-–¥—Ä—É–≥–æ–º—É.

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å, –µ–µ –Ω–∞–¥–æ —Å–∫–∞—á–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `tesseract_download()`. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ (–ø–æ—ç—Ç–æ–º—É —É –º–µ–Ω—è —ç—Ç–∞ —Å—Ç—Ä–æ—á–∫–∞ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞). –ö—Å—Ç–∞—Ç–∏, —Ç–µ—Å—Å–µ—Ä–∞–∫—Ç —Å–ø–æ—Å–æ–±–µ–Ω "—á–∏—Ç–∞—Ç—å" —Ç–µ–∫—Å—Ç—ã –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–∞—Ö, –¥–ª—è —ç—Ç–æ–≥–æ –ø–µ—Ä–µ–¥–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ä–≥—É–º–µ–Ω—Ç—É language —Ç–∞–∫: `"rus+deu"`. –í–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–¥; –µ—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω—ã, –µ—â–µ —Ä–∞–∑ –∑–∞–≥–ª—è–Ω–∏—Ç–µ –≤ [—Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π](https://tesseract-ocr.github.io/tessdoc/Data-Files-in-different-versions.html). –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã–≤–µ–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π.

```{r eval=FALSE}
# tesseract_download("rus")
tesseract_info()$available
```

–ú–æ–¥–µ–ª—å —Å–∫–∞—á–∞–Ω–∞, –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–µ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è. –ù–æ –Ω–∞ –º–Ω–æ–≥–æ–µ –Ω–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º, –≤–µ–¥—å —ç—Ç–æ –º–æ–¥–µ–ª—å –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä—É—Å—Å–∫–æ–≥–æ, —Å–æ —Å—Ç–∞—Ä–æ–π –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏–µ–π –æ–Ω–∞ –Ω–µ –∑–Ω–∞–∫–æ–º–∞. 

–§—É–Ω–∫—Ü–∏—è `pdf_ocr_text()` –∏–∑ –ø–∞–∫–µ—Ç–∞ `{pdftools}` –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –Ω–∞—à pdf –≤ —Å–µ—Ä–∏—é –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ø–∞–∫–µ—Ç—É `{tesseract}` –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è. 

```{r eval=FALSE}
text2 <- pdf_ocr_text("../ocr/–ù–ó1821_6_6[50-51].pdf", 
                      language = "rus")

cat(text2)

# Converting page 1 to –ù–ó1821_6_6[50-51]_1.png... done!
# Converting page 2 to –ù–ó1821_6_6[50-51]_2.png... done!

# 999939993993999999339993399999939939 9039303939
# –†–ê–ó–õ–£–ö–ê.
# (–≠–ª–µ–≥—Ç—è.)
# ‚Äî‚Äî‚Äî‚Äî-
# –†–æ–∑–∞–º—è, –º–æ–π —Å–ø—É—à–Ω–∏–∫—ä—å –Ω–µ–∏–∑–º—ë–Ω–Ω—ã–π
# –ù–∞ –ø–æ–ª–™ —Ä–∞–¥–æ—Å—à–µ–π –∑–µ–º–Ω—ã—Ö—å!
# –†–æ–∑–∞–ª!—è, –º–æ–π –¥—Ä—É–≥—å, —Ö—Ä–∞–Ω–∏—à–µ–ª—å –Ω–µ—Å—Ä–∞–≤–Ω–µ–Ω–Ω—ã–π!
# –ö–æ–≥–¥–∞ —è –æ—à–¥–æ—Ö–Ω—É –≤—ä –æ–±—ä—è–ø–∏—è—Ö—å —à–≤–æ–∏—Ö—ä?...
# –°—ä —à–æ–±–æ—é –≥–æ—Ä–µ—Å—Ç–µ–π –¥—É—à–∞ –º–æ—è –Ω–µ–∑–Ω–∞–µ—Ç—å,
# –ò —Å–µ—Ä–¥—Ü—É —Å–∫–æ—Ä–±–Ω–æ–º—É –Ω–µ –∏–∑–º–™–Ω–∏—Ç—å –ø–æ–∫–æ–π!
# –ù–∞–¥–µ–∂–¥–∞ –º—Ä–∞—á–Ω—ã–π –ø—É—à—å –∑–≤–™–∑–¥–æ—é –æ–∑–∞—Ä—è–µ–ø—Ç—å,
# –ò —è –º–∏—Ä—é—Å—å —Å—ä –≤—Ä–∞–∂–¥–µ–±–Ω–æ—é —Å—É–¥—å–±–æ–π!...
# ‚Äô–ì–µ–ø–µ—Ä—å, –∑–∞ –¥–∞–ª—å–Ω–∏–º–∏, —Å–≤–∏–æ—Ñ–ø—ã–º–∏ –º–æ—Ä—è–º–∏
# –¢–≤–æ–π —Å–ª–∞–¥–∫!–π –≥–ª–∞—Å—ä –Ω–µ –æ–∂–∏–≤–∏—à—å—ä –º–µ–Ω—è!
# –í–∑–æ–π–¥–µ—Ç—å –∑–∞—Ä—è –Ω–∞–¥—ä –∑–ª–∞—á–Ω—ã–º–∏ —Ö–æ–ª–º–∞–º–∏,
# –ü–æ—è–≤–∏—à—Å—è –≤—ä –ª—É—á–∞—Ö—ä —Å–≤–™—à–∏–ª–æ –¥–Ω—è ‚Äî
# –ù–∞–ø—Ä–∞—Å–Ω–æ! –≤—Å–µ –∫—Ä—É–≥–æ–º—ä –ø–æ–∫—Ä—ã–ø—é –º–≥–ª–æ—é.
# –ù–µ—Å–ª—ã—à–∏—à—Å—è –º–Ω–™ —Å–ª–∞–¥—é–π —Ç–∏–≤–æ–π –ø—Ä–∏–≤–™—Ñ–∏—Ç—å,
# –í—Å–™5 —Ä–∞–¥–æ—Å—à–∏, –Ω–∞–¥–µ–∂–¥—ã –≤—Å–™ —Å—ä —à–æ–±–æ—é ‚Äî
# –ò –æ–ø—É—Å—à$–ª—å –±–µ–∑—ä –º–∏–ª–æ–π —Å–≤–™–∑–∏—Ç—å‚Äô
# –ü–æ–¥—Ä—É–≥–∞ –º–∏–ª–∞—è, —Å–∫–∞–∂–∏, —á—à–æ –∫—Ä–∞–π –ø—Ä–µ–ª–µ—Å—à–Ω—ã–π,
# –ß–ø–æ –º–∏—Ä–≤—ã—è, —Ç–∏—Ñ–≤–∏—Å–ø—Ç—ã—è –ø–æ–ª—è,
# –ß—Ç–ø–æ —Å–≤–æ–µ–Ω—Ä–∞–≤–Ω—ã—è —Å—É–¥—å–±—ã –ø—Ä–∏–≤–™—Ç—å—ä –º–Ω –ª–µ—Å—à–Ω—ã–π,
# –ö–æ–≥–¥–∞ —Å—ä —à–æ–±–æ–π –≤—ä —Ä–∞–∑–ª—É–∫ —è.
# –ù–æ –¥—Ä—É–≥—å –º–æ–π! –≥–æ—Ä–µ—Å–º—å –æ—à–ª–µ–Ω–∞–µ–ø—Ç—å
#  245
# –ù–∞ –±—ã—Å—à—Ä—ã—Ö—å –≤—Ä–µ–º–µ–Ω–∏ –∫—Ä—ã–ª–∞—Ö—å,
# –ò —Ä–∞–¥–æ—Å—à—å —Å–µ—Ä–¥—Ü–µ –ø–æ—Å—Ñ—â–∞–µ—Ç—å....
# –ú–æ—è –Ω–∞–¥–µ–∂–¥–∞ ‚Äî –≤—ä –Ω–µ–±–µ—Å–∞—Ö—å!...
# –ö–æ–≥–¥–∞–∂—ä –æ–ø—è—à—å —Å–º—è–≥—á–µ–Ω–Ω—ã–º–∏ —Å—É–¥—å–±–∞–º–∏
# –Ø –≤—ä —Ä–∞–¥–æ—Å—à–∏ –∫—ä –ø–æ–¥—Ä—É–≥–™ –ø–æ–Ω–µ—Å—É—Å—å,
# –ö–æ—Å–Ω—É—Å—å –≤–æ–ª—à–µ–±–Ω—ã—Ö—å —Å—à—Ä—É–Ω—å –≤–æ–ª—à–µ–±–Ω—ã–º–∏ –ø–µ—Ä-
# —Å—à–∞–º–∏
# –ò, —Å—å —Ä—Ñ–∑–≤–æ—é –º–µ—á—Ç—à–æ—é –ø—Ä–∏–º–∏—Ä—é—Å—å.
# –Ø, –ë ‚Äî $5.
```

–°–æ—Ö—Ä–∞–Ω–∏–º `text2` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.

```{r eval=FALSE}
writeLines(text2, con = "../ocr/rosalia_2.txt")
```


–ö–∞–∫ –±—ã—Ç—å, –µ—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –Ω–µ —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç? 

- –ü–µ—Ä–≤–æ–µ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ—Ç –ª–∏ –æ–±—É—á–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–ø—Ä–∞–≤—è—Ç—Å—è —Å –≤–∞—à–µ–π –∑–∞–¥–∞—á–µ–π. –ú–æ–∂–Ω–æ –ø–æ–∏—Å–∫–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, [–º–æ–¥–µ–ª–∏](https://huggingface.co/Serovvans/trocr-prereform-orthography) –Ω–∞ Hugging Face. –ù–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç –±—É–¥–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —Ç–æ–≥–æ, –Ω–∞ –∫–∞–∫–∏—Ö —à—Ä–∏—Ñ—Ç–∞—Ö —É—á–∏–ª–∏ –º–æ–¥–µ–ª—å. 

- –í—Ç–æ—Ä–æ–µ: –æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –ø–æ–∏—Å–∫–∞—Ç—å –≤ [–¢—Ä–∞–Ω—Å–∫—Ä–∏–±—É—Å–µ](https://sysblok.ru/digital-heritage/transkribus-kak-kompjuternoe-zrenie-pomogaet-perevodit-teksty-sirijskih-mistikov/) (–Ω–∞–ø—Ä–∏–º–µ—Ä, [–∑–¥–µ—Å—å](https://app.transkribus.org/models/public/text/russian-print-xviii-cent) –∏ [–∑–¥–µ—Å—å](https://app.transkribus.org/models/public/text/44358)). –ù–æ —É –¢—Ä–∞–Ω—Å–∫—Ä–∏–±—É—Å–∞ –µ—Å—Ç—å —Ä—è–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π: –º–æ–¥–µ–ª–∏ –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ, –∑–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–∏–¥–µ—Ç—Å—è –ø–ª–∞—Ç–∏—Ç—å, –∏ –¥—Ä. –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –º–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≥–æ—Ç–æ–≤—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.

- –ù–∞–∫–æ–Ω–µ—Ü, –º–æ–∂–Ω–æ –¥–æ–æ–±—É—á–∏—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –º–æ–¥–µ–ª—å `tesseract`, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤–æ—Ç –≤ —ç—Ç–æ–º [–ø—Ä–∏–º–µ—Ä–µ](https://arcruz0.github.io/posts/finetuning-tess/index.html). –≠—Ç–∏–º –º—ã —Å–µ–π—á–∞—Å –∏ –∑–∞–π–º–µ–º—Å—è.

## –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è pdf

–§—É–Ω–∫—Ü–∏—è `pdf_ocr_text()` "–ø–æ–¥–º–µ—Ç–µ—Ç" –∑–∞ —Å–æ–±–æ–π –≤—Å–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏. –ß—Ç–æ–±—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å pdf –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—é —Ç–µ–∫—Å—Ç–∞ –∏–ª–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—É—á–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö), –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥—Ä—É–≥—É—é —Ñ—É–Ω–∫—Ü–∏—é. 

```{r eval=FALSE}
pdf_convert("../ocr/–ù–ó1821_6_6[50-51].pdf", 
            format = "png", 
            dpi = 300,
            pages = NULL,  # –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∏–ª–∏ c(1,3,5) –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö
            filenames = NULL)
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–¥ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –¥–≤–∞ —Ñ–∞–π–ª–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.png`. –û–Ω–∏ –Ω–∞–º –ø—Ä–∏–≥–æ–¥—è—Ç—Å—è —á—É—Ç—å –ø–æ–∑–∂–µ.

## –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π 

–¢–æ—á–Ω–æ—Å—Ç—å OCR –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ß–∞—Å—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —É–¥–∞–ª—è—è —à—É–º –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏–ª–∏ –æ–±—Ä–µ–∑–∞—è –æ–±–ª–∞—Å—Ç—å, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ç–µ–∫—Å—Ç. –û—Ç–ª–∏—á–Ω—ã–π –ø–∞–∫–µ—Ç `{magick}` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª–µ–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ß—Ç–æ –º–æ–∂–Ω–æ [–ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å](https://cran.r-project.org/web/packages/tesseract/vignettes/intro.html#Preprocessing_with_Magick):

- –ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–∫–ª–æ–Ω–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `image_deskew()` –∏ `image_rotate()`, —á—Ç–æ–±—ã –≤—ã—Ä–æ–≤–Ω—è—Ç—å —Ç–µ–∫—Å—Ç –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏.
- `image_trim()` –æ–±—Ä–µ–∑–∞–µ—Ç –ø–æ–ª—è —Å –ø—Ä–æ–±–µ–ª—å–Ω—ã–º–∏ –æ–±–ª–∞—Å—Ç—è–º–∏. 
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `image_convert()` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –≥—Ä–∞–¥–∞—Ü–∏–∏ —Å–µ—Ä–æ–≥–æ.
- –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `image_resize()`.
- –§—É–Ω–∫—Ü–∏–∏ `image_modulate()` –∏–ª–∏ `image_contrast()` –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏ —è—Ä–∫–æ—Å—Ç–∏/–∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞.
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ `image_reducenoise()` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è —à—É–º–∞.

–í–æ–∑—å–º–µ–º –≤–æ—Ç —Ç–∞–∫–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ —Å—Ä–∞–≤–Ω–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –¥–æ –∏ –ø–æ—Å–ª–µ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥–∞. 

![](images/IMG_5539.jpg)


```{r}
input <- image_read("./images/IMG_5539.jpg")
```

```{r}
# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
processed <- input |>
  image_deskew() |> 
  image_resize("2000x") |>          
  image_convert(colorspace = "gray") |> 
  image_trim(fuzz = 40)  |> 
  image_modulate(brightness = 120, saturation = 0)  |>
  image_contrast(sharpen = 1) |>
  image_normalize() |>  
  image_despeckle() 
```

```{r eval=FALSE}
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∏—Å–∫ (–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
image_write(processed, path = "./images/processed.png", format = "png", density = "300x300")
```


![](./images/processed.png) 


```{r}
# OCR –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏
tesseract::ocr(processed, engine = "rus")
```


–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ —Å—Ç—Ä–æ–∫–∏ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–π –Ω–∞–∫–ª–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑-–∑–∞ –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã), —Ç–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –Ω–µ–ª–∏–Ω–µ–π–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –∏—Å–∫–∞–∂–µ–Ω–∏—è). –≠—Ç–æ —Å–ª–æ–∂–Ω–µ–µ, –∏ –≤ `{magick}` –Ω–µ—Ç –ø—Ä—è–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —ç—Ç–æ–≥–æ. –í–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –≤ —Ç–æ–º —á–∏—Å–ª–µ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ü–û.

## –§–∞–π–Ω-—Ç—é–Ω–∏–Ω–≥

–ù–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 4, Tesseract –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–π—Ä–æ–Ω–Ω—É—é —Å–µ—Ç—å –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–æ–±—É—á–∞—Ç—å –º–æ–¥–µ–ª—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á. –î–ª—è –¥–æ–æ–±—É—á–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã _—ç—Ç–∞–ª–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ_ ‚Äî —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –∏–º —Ç–µ–∫—Å—Ç–æ–º. 

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É —Å –∏–º–µ–Ω–µ–º `{—è–∑—ã–∫}-ground-truth/` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `orus-ground-truth/`) –∏ –ø–æ–º–µ—Å—Ç–∏—Ç–µ —Ç—É–¥–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞. –ù–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –º–æ–≥—É—Ç –±—ã—Ç—å –ª—é–±—ã–º–∏. 

```{r eval=FALSE}
dir.create("orus-ground-truth")
```

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±: —Å–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –≤—Ä—É—á–Ω—É—é (—á–µ–º –±–æ–ª—å—à–µ, —Ç–µ–º –ª—É—á—à–µ). –í–æ—Ç –ø—Ä–∏–º–µ—Ä:

![](images/ground_truth1.png)

–ë–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –Ω–∞—Ä–µ–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ [–∑–¥–µ—Å—å](https://github.com/ukolshurika/finetune-ocr-sample) (–¥–ª—è Python). –ú—ã –Ω–∞—Ä–µ–∂–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ –≤ R. –î–ª—è —ç—Ç–æ–≥–æ —Å–∫–∞—á–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π [—Å–∫—Ä–∏–ø—Ç](https://github.com/locusclassicus/philology_2025/blob/main/helper_scripts/crop_words.R) –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ:

```{r}
source("../helper_scripts/crop_words.R")
```

–í –≥–ª–æ–±–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –ø–æ—è–≤–∏—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `crop_words()`. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∑–∞–≥–ª—è–Ω—É—Ç—å –≤–Ω—É—Ç—Ä—å, –ø—Ä–æ—Å—Ç–æ –Ω–∞–±–µ—Ä–∏—Ç–µ `View(crop_words)`. –ù–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ –Ω–∞—á–∏–Ω–∫–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –í—ã –∂–µ –Ω–µ –≤—Å–µ–≥–¥–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–º –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –¥—Ä—É–≥–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π? –ü—Ä–æ—Å—Ç–æ —ç—Ç—É –≤—ã –≤–∑—è–ª–∏ –Ω–µ –∏–∑ –ø–∞–∫–µ—Ç–∞, –∞ –∏–∑ GitHub'–∞. –ê –º–æ–∂–µ—Ç–µ —Å–∞–º–∏ –Ω–∞–ø–∏—Å–∞—Ç—å, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–±–µ, –∏ —Ç–∞–∫ –∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤.

–§—É–Ω–∫—Ü–∏—è `crop_words()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥–µ –ø—É—Ç—å –¥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç), –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∫—É–¥–∞ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã —Å–ª–æ–≤–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `words`), —è–∑—ã–∫ –±–∞–∑–æ–≤–æ–π –º–æ–¥–µ–ª–∏ (–∫–æ–¥ `tesseract`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `rus`) –∏ –æ—Ç—Å—Ç—É–ø –≤–æ–∫—Ä—É–≥ —Å–ª–æ–≤–∞ –ø—Ä–∏ –æ–±—Ä–µ–∑–∫–µ (–≤ –ø–∏–∫—Å–µ–ª—è—Ö). –ê—Ä–≥—É–º–µ–Ω—Ç `overwrite` —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–º, –æ—á–∏—â–∞—Ç—å –ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã `word_*.png` –≤ `out_dir` –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `FALSE`). 

–¢–∞–∫–∂–µ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø–∞–∫–µ—Ç–æ–≤ `magick`, `tesseract`, `tidyverse`; –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—ã—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Ö –≤–º–µ—Å—Ç–µ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –∑–∞—Ç–µ–º –ø–æ–¥–∫–ª—é—á–∞–µ—Ç. –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã OCR —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —è–∑—ã–∫–æ–º –≤ —Å–∏—Å—Ç–µ–º–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —è–∑—ã–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ Tesseract. –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤ –ø–∞–ø–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –≤–µ—Ä–Ω–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏.

```{r eval=FALSE}
crop_words(image_path = "../ocr/–ù–ó1821_6_6[50-51]_1.png",
           out_dir = "../ocr/orus-ground-truth",
           lang = "rus",
           pad = 0,
           overwrite = TRUE)
```


–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤ –ø–∞–ø–∫–µ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–µ—á—Ç–æ –ø–æ—Ö–æ–∂–µ–µ:

![](images/words_view.png)
–ß—Ç–æ–±—ã "—Ä–∞–∑—Ä–µ–∑–∞—Ç—å" –Ω–∞ —Å–ª–æ–≤–∞ _–Ω–µ—Å–∫–æ–ª—å–∫–æ_ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–π –∏–∑ –ø–∞–∫–µ—Ç–∞ `purrr` (–º—ã –≤—Å—Ç—Ä–µ—á–∞–ª–∏—Å—å —Å –Ω–∏–º–∏, –∫–æ–≥–¥–∞ —á–∏—Ç–∞–ª–∏ —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–µ). 

–°–Ω–∞—á–∞–ª–∞ —Å–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –ø—É—Ç–∏ –¥–æ —Ñ–∞–π–ª–æ–≤ –≤ —Å–∏–º–≤–æ–ª—å–Ω—ã–π –≤–µ–∫—Ç–æ—Ä.

```{r}
img_paths <- list.files("../ocr", pattern = "png", full.names = TRUE)
img_paths
```

–ò –∑–∞–ø—É—Å–∫–∞–µ–º –∏—Ç–µ—Ä–∞—Ü–∏–∏! 

```{r eval=FALSE}
walk(img_paths, crop_words, 
     out_dir = "../ocr/orus-ground-truth",
     overwrite = FALSE)
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–¥–∞ –≤ –ø–∞–ø–∫–µ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è 157 —Ñ–∞–π–ª–æ–≤ `png`. 

```{r eval=FALSE}
list.files("../ocr/orus-ground-truth") |> 
  length()
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `walk()`, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç `map_chr()` –∏–∑ —Ç–æ–≥–æ –∂–µ –ø–∞–∫–µ—Ç–∞ `{purrr}`, –Ω–∏—á–µ–≥–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–µ. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–µ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ `crop_words()`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Ä–µ–∑–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —Å–ª–æ–≤–∞ –∏ "—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç" –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ª–æ–≤ –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é. –¢–æ –∂–µ —Å–∞–º–æ–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫:

```{r eval=FALSE}
crop_words(image_paths[1])
crop_words(image_paths[2])

# ...–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ!
```

–ù–æ, —Å–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å, –ø–æ–≤—Ç–æ—Ä—è—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –±–æ–ª—å—à–µ –¥–≤—É—Ö —Ä–∞–∑ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É—Ç–æ–º–∏—Ç–µ–ª—å–Ω–æ. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–ª–æ—Ö–∏–º —Ç–æ–Ω–æ–º "–∫–æ–ø–∏–ø–∞—Å—Ç–∏—Ç—å" –æ–¥–∏–Ω –∫—É—Å–æ–∫ –∫–æ–¥–∞ –±–æ–ª–µ–µ –¥–≤—É—Ö —Ä–∞–∑. –ü–æ—ç—Ç–æ–º—É –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é-–∏—Ç–µ—Ä–∞—Ç–æ—Ä. –í–∂—É—Ö.

### –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

–¢–µ–ø–µ—Ä—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–∏–º —Ç–µ–∫—Å—Ç (—Ñ–∞–π–ª—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.gt.txt`). –î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç `tesseractgt`. –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—É—é –º–æ–¥–µ–ª—å.

```{r eval=FALSE}
create_gt_txt(
  folder = "../ocr/orus-ground-truth",
  extension = "png", 
  engine = tesseract::tesseract(language = "rus")
)
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã –ø–æ—è–≤–∏–ª–∏—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –≠—Ç–æ –¥–æ–ª–∂–Ω–æ –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

![](images/img_and_text_view.png)
   
–¢–µ–ø–µ—Ä—å —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —ç—Ç–∞–ø: –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ (—á–µ–º –±–æ–ª—å—à–µ, —Ç–µ–º –ª—É—á—à–µ). –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã `.gt.txt` –ø–æ–º–æ–∂–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:

```{r eval=FALSE}
correct_gt_txt() 
```

![[–ò—Å—Ç–æ—á–Ω–∏–∫](https://arcruz0.github.io/posts/finetuning-tess/)](https://arcruz0.github.io/posts/finetuning-tess/imgs/addin.gif)

–ï—Å–ª–∏ –Ω–µ –≤–∏–¥–Ω–æ –ø–∞–ø–∫–∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏, —Å–º–µ–Ω–∏—Ç–µ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é. –í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤: 

:::{.callout-note icon=false}:::
–ß–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –¥–æ—Ä–µ—Ñ–æ—Ä–º–µ–Ω–Ω–æ–π —Ä—É—Å—Å–∫–æ–π –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏–∏:

- –Ø—Ç—å: —¢ (U+0462), —£ (U+0463)
- –ò –¥–µ—Å—è—Ç–µ—Ä–∏—á–Ω–æ–µ: –Ü (U+0406), —ñ (U+0456)
- –§–∏—Ç–∞: —≤ (U+0472), —≥ (U+0473)
- –ò–∂–∏—Ü–∞: —¥ (U+0474), —µ (U+0475)
- –¢–≤—ë—Ä–¥—ã–π –∑–Ω–∞–∫, –µ—Ä—ä: –™ (U+042A), —ä (U+044A)
:::


üõ†Ô∏è –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É `Warning: Error in writeImpl: Text to be written must be a length-one character vector`, —Å–¥–µ–ª–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:

```{r eval=FALSE}
fix_gt_txt <- function(folder) {
  txts <- list.files(folder, pattern = "\\.txt$", full.names = TRUE)
  for (f in txts) {
    # —á–∏—Ç–∞–µ–º —Ñ–∞–π–ª
    x <- readLines(f, warn = FALSE, encoding = "UTF-8")
    
    # –µ—Å–ª–∏ –ø—É—Å—Ç–æ ‚Üí –æ—Å—Ç–∞–≤–ª—è–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
    if (length(x) == 0) {
      one_line <- ""
    } else {
      # —Å–∫–ª–µ–∏–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª
      one_line <- paste(x, collapse = " ")
      # —É–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã
      one_line <- trimws(one_line)
    }
    
    # –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ñ–∞–π–ª
    writeLines(enc2utf8(one_line), f, useBytes = TRUE)
  }
  message("–ì–æ—Ç–æ–≤–æ: –≤—Å–µ txt-—Ñ–∞–π–ª—ã –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ")
}

# –∑–∞–ø—É—Å–∫–∞–µ–º
fix_gt_txt("../ocr/orus-ground-truth") # –≤–∞—à –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
```


### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π 

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ Linux / MacOS –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é `make`. –ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Å—Ç–∏ –¥–æ–æ–±—É—á–µ–Ω–∏–µ –Ω–∞ Windows, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [WSL](https://learn.microsoft.com/en-us/windows/wsl/install). –≠—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Linux –≤–Ω—É—Ç—Ä–∏ Windows. (–ï—Å–ª–∏ —ç—Ç–æ –ø–æ–∫–∞ —Å–ª–æ–∂–Ω–æ, –ø–æ–∫–∞ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —à–∞–≥). 

```{r eval=FALSE}
make --version # –¥–ª—è Linux
```

–ù–∞ MacOS —Å–∏—Å—Ç–µ–º–Ω—ã–π make ‚Äî BSD –∏ –≤–µ–¥—ë—Ç —Å–µ–±—è –∏–Ω–∞—á–µ, —á–µ–º GNU Make, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ã—á–Ω–æ –æ–∂–∏–¥–∞—é—Ç —É—á–µ–±–Ω–∏–∫–∏ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–±–æ—Ä–∫–µ/–æ–±—É—á–µ–Ω–∏—é. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—É—é GNU Make –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ Homebrew (—ç—Ç–æ –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤, –µ–≥–æ –Ω–∞–¥–æ –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å: <https://brew.sh/>). Homebrew —Å—Ç–∞–≤–∏—Ç GNU Make –ø–æ–¥ –∏–º–µ–Ω–µ–º gmake, —á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º make. –ö–æ–º–∞–Ω–¥—ã –Ω–∏–∂–µ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Homebrew.

```{r eval=FALSE}
brew install make
```

```{r eval=FALSE}
gmake --version # –¥–ª—è MacOS
```

###  –î–æ–æ–±—É—á–µ–Ω–∏–µ

–ó–∞–¥–∞—á–∞ —ç—Ç–æ–≥–æ —à–∞–≥–∞ ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –Ω—É–∂–Ω—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è `Tesseract`. –°–Ω–∞—á–∞–ª–∞ —Å–∫–∞—á–∏–≤–∞–µ–º —Å–ª—É–∂–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç `tesstrain`, –ø–æ—Ç–æ–º ‚Äî —è–∑—ã–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.

1) –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ —Å–∫–∞—á–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç tesstrain —Å GitHub.

```{r eval=FALSE}
git clone https://github.com/tesseract-ocr/tesstrain.git
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É –≤–∞—Å –ø–æ—è–≤–∏—Ç—Å—è –ø–∞–ø–∫–∞ `tesstrain`. –í –Ω–µ–π –ª–µ–∂–∞—Ç —Å–∫—Ä–∏–ø—Ç—ã –∏ —Ñ–∞–π–ª `Makefile`.

3) –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É tesstrain. –ö–æ–º–∞–Ω–¥–∞ `cd` –æ–∑–Ω–∞—á–∞–µ—Ç —Å–º–µ–Ω—É –∫–∞—Ç–∞–ª–æ–≥–∞.

```{r eval=FALSE}
cd tesstrain
```

4) –°–∫–∞—á–∞–π—Ç–µ —è–∑—ã–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

```{r eval=FALSE}
make tesseract-langdata
# –ò–õ–ò –Ω–∞ MacOS
gmake tesseract-langdata
```

–ö–æ–º–∞–Ω–¥–∞ `gmake tesseract-langdata` (–∏–ª–∏ `make tesseract-langdata`)  –∑–∞–ø—É—Å–∫–∞–µ—Ç —É—Ç–∏–ª–∏—Ç—É (–Ω–µ–±–æ–ª—å—à—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É) `make` –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É `tesseract-langdata`, –æ–ø–∏—Å–∞–Ω–Ω—É—é –≤ `Makefile` –ø—Ä–æ–µ–∫—Ç–∞. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —è–∑—ã–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ Tesseract, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è, –∞ –∏–º–µ–Ω–Ω–æ `langdata` –∏/–∏–ª–∏ `langdata_lstm` ‚Äî –Ω–∞–±–æ—Ä—ã —Ç–µ–∫—Å—Ç–æ–≤, —Å–ø–∏—Å–∫–∏ —Å–ª–æ–≤, –ø—Ä–∞–≤–∏–ª–∞ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏/–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ—á–∏–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∏ –æ–±—É—á–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏. –û–¥–Ω–∏–º —Å–ª–æ–≤–æ–º, –¥–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—è—Ç—Å—è –¥–ª—è –æ–±—É—á–µ–Ω–∏—è.
 
–ï—Å–ª–∏ –≤—Å–µ —Ö–æ—Ä–æ—à–æ, –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∑–∞–±–µ–≥–∞—é—Ç –∫–∞–∫–∏–µ-—Ç–æ —Ü–∏—Ñ–∏—Ä–∫–∏. –í—Å–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –ø–æ–¥–æ–∂–¥–∏—Ç–µ.

```{r eval=FALSE}
# Connecting to raw.githubusercontent.com... connected. HTTP request sent, awaiting response... OK... Saving to...
```


### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞

–ò—Ç–æ–≥: –ø–æ—Å–ª–µ —ç—Ç–∏—Ö ~~–º—É—á–µ–Ω–∏–π~~ –∫–æ–º–∞–Ω–¥ —É –≤–∞—Å –µ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è `tesstrain`, –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –µ—ë –∫–∞—Ç–∞–ª–æ–≥–µ, –∏ –≤ –Ω–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏—Å—Ö–æ–¥–Ω—ã–µ —è–∑—ã–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (`data`), –±–µ–∑ –∫–æ—Ç–æ—Ä—ã—Ö –æ–±—É—á–µ–Ω–∏–µ —Å–≤–æ–µ–π –º–æ–¥–µ–ª–∏ Tesseract **–Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è**. 

–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```{r echo=FALSE, eval=FALSE}
library(fs)
fs::dir_tree(path = "../tesstrain",
             recurse = TRUE)
```

```{r eval=FALSE}
# ../tesstrain
# ‚îú‚îÄ‚îÄ LICENSE
# ‚îú‚îÄ‚îÄ Makefile
# ‚îú‚îÄ‚îÄ README.md
# ‚îú‚îÄ‚îÄ count_chars.py
# ‚îú‚îÄ‚îÄ data
# ‚îÇ   ‚îî‚îÄ‚îÄ langdata
# ‚îÇ       ‚îú‚îÄ‚îÄ Arabic.unicharset
# ‚îÇ       ‚îú‚îÄ‚îÄ Armenian.unicharset
# ‚îÇ       ‚îú‚îÄ‚îÄ Bengali.unicharset
# ‚îÇ       ‚îú‚îÄ‚îÄ ...
# ‚îÇ       ‚îî‚îÄ‚îÄ radical-stroke.txt
# ‚îú‚îÄ‚îÄ generate_eval_train.py
# ‚îú‚îÄ‚îÄ generate_gt_from_box.py
# ‚îú‚îÄ‚îÄ generate_line_box.py
# ‚îú‚îÄ‚îÄ generate_line_syllable_box.py
# ‚îú‚îÄ‚îÄ generate_wordstr_box.py
# ‚îú‚îÄ‚îÄ normalize.py
# ‚îú‚îÄ‚îÄ ocrd-testset.zip
# ‚îú‚îÄ‚îÄ ocrd.plot_cer.png
# ‚îú‚îÄ‚îÄ plot_cer.py
# ‚îú‚îÄ‚îÄ plot_log.py
# ‚îú‚îÄ‚îÄ requirements.txt
# ‚îú‚îÄ‚îÄ shuffle.py
# ‚îî‚îÄ‚îÄ src
#     ‚îú‚îÄ‚îÄ README.md
#     ‚îú‚îÄ‚îÄ setup.cfg
#     ‚îú‚îÄ‚îÄ setup.py
#     ‚îî‚îÄ‚îÄ tesstrain
#         ‚îú‚îÄ‚îÄ __init__.py
#         ‚îú‚îÄ‚îÄ __main__.py
#         ‚îú‚îÄ‚îÄ arguments.py
#         ‚îú‚îÄ‚îÄ generate.py
#         ‚îú‚îÄ‚îÄ language_specific.py
#         ‚îî‚îÄ‚îÄ wrapper.py
``` 

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω–∞–¥–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ–±—É—á–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ -- –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ `orus-ground-truth` –≤ –ø–∞–ø–∫—É `data`. –ú–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é. 

–¢–∞–∫–∂–µ —Å–æ–∑–¥–∞–π—Ç–µ –µ—â–µ –æ–¥–Ω—É –ø–∞–ø–∫—É –≤–Ω—É—Ç—Ä–∏ tesstrain –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ç—É–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —è–∑—ã–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ. 

```{r eval=FALSE}
mkdir -p usr/share/tessdata
wget -P usr/share/tessdata https://github.com/tesseract-ocr/tessdata_best/raw/main/rus.traineddata
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –¥–æ–æ–±—É—á–µ–Ω–∏–µ. 

```{r eval=FALSE}
# –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ! –∏–ª–∏ make –Ω–∞ Linux
gmake training MODEL_NAME=orus START_MODEL=rus FINETUNE_TYPE=Impact LANG_TYPE=Both
```

–ö–æ–º–∞–Ω–¥–∞ –≤—ã—à–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç "—Ä–µ—Ü–µ–ø—Ç" –æ–±—É—á–µ–Ω–∏—è –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ Tesseract. –≠—Ç–æ—Ç —Ä–µ—Ü–µ–ø—Ç –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º `training` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–æ—Ç–æ–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –¥–æ–æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞.

–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∫–∞–∂–¥–∞—è —á–∞—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã:

- `gmake training` ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ `training` –∏–∑ —Ñ–∞–π–ª–∞ –ø—Ä–∞–≤–∏–ª (`Makefile`). –û–Ω–æ —Å–∫–∞—á–∞–µ—Ç/–ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ, –∑–∞–ø—É—Å—Ç–∏—Ç –æ–±—É—á–µ–Ω–∏–µ –∏ –ø–æ–ª–æ–∂–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–∞–ø–∫—É —Å –º–æ–¥–µ–ª—è–º–∏.
- `MODEL_NAME=orus` ‚Äî –∏–º—è –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å. –í –∫–æ–Ω—Ü–µ –ø–æ—è–≤–∏—Ç—Å—è —Ñ–∞–π–ª –≤—Ä–æ–¥–µ `orus.traineddata`.
- `START_MODEL=rus` ‚Äî –Ω–µ —É—á–∏—Ç—å —Å –Ω—É–ª—è, –∞ –≤–∑—è—Ç—å –∑–∞ –æ—Å–Ω–æ–≤—É —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ä—É—Å—Å–∫—É—é –º–æ–¥–µ–ª—å `rus` –∏ "–¥–æ–∫—Ä—É—Ç–∏—Ç—å" –µ–µ –ø–æ–¥ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ. –≠—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –∏ –Ω–∞–¥–µ–∂–Ω–µ–µ.
- `FINETUNE_TYPE=Impact` ‚Äî "–±–µ—Ä–µ–∂–Ω–æ–µ" –¥–æ–æ–±—É—á–µ–Ω–∏–µ: –º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç–∏ —Å–µ—Ç–∏, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –±–∞–∑–æ–≤–æ–π –º–æ–¥–µ–ª–∏ –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –µ—ë –ø–æ–¥ –≤–∞—à–∏ —Ç–µ–∫—Å—Ç—ã.
- `LANG_TYPE=Both` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ –Ω–∞–±–æ—Ä–∞ —è–∑—ã–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö Tesseract (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∏ LSTM), —á—Ç–æ–±—ã —à–∏—Ä–µ –ø–æ–∫—Ä—ã—Ç—å –ø—Ä–∞–≤–∏–ª–∞, —Å–ª–æ–≤–∞—Ä–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã. 

–î–æ–æ–±—É—á–µ–Ω–∏–µ –∑–∞–Ω–∏–º–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç. –í–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –ø–µ—Ä–µ—Ä—ã–≤–æ–º, —á—Ç–æ–±—ã –ø–æ—Ö–≤–∞–ª–∏—Ç—å —Å–µ–±—è –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–µ–π—à–µ–π –∑–∞–¥–∞—á–∏. –í—ã –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–ª–∏ –¥–æ–æ–±—É—á–µ–Ω–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –≤–æ–æ–±—â–µ-—Ç–æ `r emo::ji("cool")`  `r emo::ji("cool")` `r emo::ji("cool")`

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–¥–µ–ª–∏

–ù–∞–π–¥–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—É—é –ø–∞–ø–∫—É Tesseract:

```{r}
tesseract::tesseract_info()$datapath
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—é–¥–∞ –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å `orus.trainedata`, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ –ø–∞–ø–∫–µ `data` –ø–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è.

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏:

```{r}
tesseract::tesseract_info()$available
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å:

```{r}
text3 <- pdf_ocr_text("../ocr/–ù–ó1821_6_6[50-51].pdf", language = "orus")
```

–°–Ω–æ–≤–∞ –∑–∞–ø–∏—à–µ–º. 

```{r eval=FALSE}
# —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π –ø—É—Ç—å –∏–ª–∏ –æ–¥–Ω–æ —Ç–æ–ª—å–∫–æ –∏–º—è
writeLines(text3, con = "../ocr/rosalia_3.txt")
```

–≠—Ç–∏ —Ç–µ–∫—Å—Ç—ã –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π. –î–ª—è –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª—å—à–µ –æ–±—É—á–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –¥–æ–æ–±—É—á–µ–Ω–∏–µ Tesseract –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤;  –ü–∞–∫–µ—Ç `tesseractgt` —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –æ–±—É—á–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

## –í–∏–¥–µ–æ –∫ —ç—Ç–æ–º—É —É—Ä–æ–∫—É

- [–í–∏–¥–µ–æ](https://vk.com/video91786643_456239077) 2025 –≥.

## –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ

```{r echo=FALSE}
library(cowsay)
say("–ë—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–∑–∂–µ", "owl")
```